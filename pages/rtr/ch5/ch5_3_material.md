---
title: "5.3 材质"
sidebar: rtr
layout: book
permalink: rtr_ch5_material.html
---

### 5.3 材质
在渲染中，场景使用物体的表面来表现物体。对象的表现是通过给场景中的模型绑定材质。每个材质会关联这一些着色程序，纹理，以及其他的属性。这些都是用来模拟光线与物体的交互。本节先描述显示世界中光线如何与物体发生交互，接着演示一个简单的材质模型。在第七章，我们会介绍一个更通用的材质模型。

基本来说，所有的光线交互都是以下两种现象：`散射(scattering)`和`吸收(absorption)`。

散射发生于光线接触到光学上不连续的地方。可能是两种不同光学属性的物质的接触面，水晶的断截面，或者密度的变换等等。散射不会改变光量，它值改变光的方向。

吸收发生在物体内部，它会使部分光转变成其他能量而消失。它会减少光量，但不会作用于方向。

渲染中最重要的光学不连续面是空气和物体的表面。表面将光学散射成两个独立部分：表面内部（折射或穿透）和外部（反射）。图5.6展示这个光照。

![图](/images/RTR3.05.06.png)
图5.6

在透明物体中，穿透的光线在物体中继续前进。5.7节会讨论渲染这种物体的一个简单技术方案。以后的章节会包含更多高级技巧。本节中我们只讨论不透明对象，这种情形下，穿透的光线会经历多次散射和吸收，直到再次从物体的表面发射出去。见图5.7.

![图](/images/RTR3.05.07.png)
图5.7

在图5.7中，我们可以看到光线在表面被反射到一个不同的方向和颜色，穿过表面的光线部分被吸收，最终散射出表面。因此，通常我们把表面的着色分成两个部分。`高光(specular)`表示直接从表面反射的光线，`漫反射(diffuse)`则是表示经历了穿透、吸收、散射的光线。

为了使用着色器表达材质的特性，我们需要使用输入光线的数量和方向，来描述输出光线的数量和方向。

输入光照使用表面辐照度来度量。我们使用`出射度(exitance)`来衡量输出光线，类似辐照度，它也是每秒每单位区域的能量值。出射度的符号是*M*。光线交互都是线性的，辐照度增强一倍，出射度也会增强一倍。出射度除以辐照度是材质的一个典型属性。对于没有自发光的物体，这个比值总是在0和1之间。出射度和辐照度的这个比值，在光线的不同颜色上可以不同，所以它也是表现为一个RGB向量或者颜色值，通常称为`表面颜色(surface color)`**c**。为了表现这两种不同的部分，着色公式中往往包含着独立的高光颜色($c_{spec}$)和漫反射颜色($c_{diff}$)属性，累加以得到整个的表面颜色**c**。因为RGB向量的值是在0和1之间，这些规律的颜色值可以使用标准的颜色获取接口、绘画程序等来获得。一个表面的高光和漫反射取决于物体的组成成分，也就是它是否是铁制品，塑料制品，金子、木头或其他的等等。

在本章中，我们假设漫反射是没有方向性的——它在所有方向上表现一致。高光的方向则需要处理。不同于表面颜色取决于构成的材料，高光的方向分布取决于表面的`光泽度`。我们可以在图5.8中看到这种决定关系，图中展示了两种不同光泽度的图表和图像。我们可以看到光滑表面的反射光线更加的紧密，粗糙表面的反射光线则更加的分散。在旁边的图像中我们看到反射的图像和高光的可视结果。光滑表面显示了形状分明的反射和紧凑明亮的高光；粗糙表面的反射则相当模糊和明显比较宽，却暗淡的高光。着色公式一般包含一个光泽度参数，用来控制高光的分布。

![图](/images/RTR3.05.08.png)
图5.8

要注意，在几何上，图5.8的图像中的对象基本是一样的；我们看不到他们表面有任何的不规则部分。这些不规则部分是有的，不过太小了一致没法再图像中观察到。表面细节是否直接渲染成图元和纹理，还是根据着色公式中的参数来渲染，是由观察的级别来决定的。

![图](/images/RTR3.05.09.png)
图5.9

在图5.9中，我们可以看到同一个物体的几个不同视图。左边第一张图片中，我们可以看到单个叶子的放大图。如果我们渲染这个场景的话，叶子脉络会作为纹理渲染出来。下一幅图中，我们看到一堆叶子。如果我们渲染这个图片的话，每个叶子会使用一个简单模型网格；叶子的脉络已经不可见了，但我们可以降低着色公式中的光泽度参数，来解释叶脉引起的反射光线。再下一幅图片是一个满是树的山坡。这里，单独的树叶已经不可见。渲染中，每个单独的树被建模成三角网格，着色公式可以模拟随机的叶子散射，可能使用一个更小的光泽度参数。最右的图片展示的是一个远距离的山林。这里，单个树都已经不可见。整个山被建模成一个网格，像树在其他树上的影子这种效果需要使用着色公式来建模（可能是使用表面颜色）而不是使用单独的渲染。本书的后面会介绍一些其他的例子，来展示观察级别如何影响视觉现象的渲染。



