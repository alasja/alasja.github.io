---
title: "3.1 GPU流水线概览"
keywords: sample homepage
tags: [getting_started]
sidebar: rtr
layout: book
permalink: rtr_ch3_gpu_pipeline.html
summary: GPU
---

> "计算机就是显示"   -- Jen-Hsun Huang

在以前，硬件的图形加速是从流水线结尾的地方开始的，最开始是对三角形扫描线加速。连续好几代硬件都为流水线做支持，直到更高级的应用阶段算法引入到硬件加速中。专门的硬件比软件只快在速度上，然而速度就是决定性的因素。

在过去的十年里，图形硬件发生了翻天覆地的变化。第一款面向消费者的图形芯片包含了硬件顶点处理，它就是在1999年发售的NVIDIA GeForce256。NVIDIA重新定义了GPU的含义，用以区分GeForce256跟之前那些仅支持栅格化的芯片。接下来的几年，GPU从复杂的可配置的固定函数流水线，朝高度可编程发展，如同一块黑板，开发者可以实现各自的算法。多种多样可编程着色器是控制GPU的主要方法。顶点着色器可以进行各种（包括变换和变形）逐顶点操作。同样的，像素着色器处理单个的像素，支持逐像素的复杂着色计算。几何着色器可以创建或者销毁一些几何图元（点、线、三角形）。计算结果可以写入多个高精度的缓冲，然后作为顶点数据或者纹理数据来使用。有些流水线为了效率，依然是配置而不可编程的，但是，可编程和灵活性是大势所趋。



### 3.1 GPU流水线概览
第二章已经介绍过GPU如何实现几何阶段和栅格阶段的流水线阶段。这些被划分成多个硬件阶段，它们不同程度的可配置或可编程。图片3.1中，不同的颜色代表了不同的可编程或可配置能力。注意这些物理阶段的划分跟第二章中的功能阶段有些不同。

![图](/images/RTR3.03.01.png)

顶点着色器是完全可编程的阶段，一般来说用来实现模型和视角变换，顶点着色，以及投影等功能阶段。几何着色器是可选的，也是完全可编程的，可以操作图元的顶点。可以用来做逐图元相关的操作，删除图元或者创建新的图元。裁剪、屏幕映射、三角形装配以及三角形遍历阶段，都是固定函数阶段，他们实现的功能阶段同他们的名字一致。像素着色器跟顶点着色器一样都是完全可编程的，它完成的是像素着色这个功能阶段。最后，合并阶段在发生在完全可编程的阶段和固定函数阶段之间。虽然合并阶段不可编程，但是它是高可配置的，可以完成很多操作。它完成的是合并这个功能阶段，负责修改颜色、Z缓冲、混合以及模板缓冲等相关的缓冲。

随着时间推进，GPU流水线从硬编码逐渐朝着可控和灵活性上发展。可编程着色阶段的引入是发展中最重要的一步。下一节开始介绍不同可编程阶段的特性。

