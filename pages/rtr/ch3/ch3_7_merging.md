---
title: "3.7 合并阶段"
keywords: sample homepage
tags: [getting_started]
sidebar: rtr
layout: book
permalink: rtr_ch3_merging.html
summary: GPU
---

### 3.7 合并阶段
正如2.4.4节所说的，合并阶段是单个片元的深度和颜色与帧缓冲合并的地方。这个阶段是模板缓冲和Z缓冲作用的地方。另一个操作也发生在这儿，那就是颜色混合，这是透明叠加和合成的常用操作（见章节5.7）。

合并阶段和固定功能阶段（如裁剪）和完全可编程阶段之间非常有趣的中点。虽然它不可编程，但它却高度可配置。特别是颜色混合，可以设置非常多不同的操作。最常用的是对颜色值和透明度做相乘、叠加、相减等操作，还有其他操作，比如取最小、取最大，以及位的逻辑操作等。DX10引入了`像素着色器输出的两个颜色和帧缓冲混合`的能力，这被称为双颜色混合（dual-color blending)。

如果使用了MRT功能，混合可以在多个缓冲中进行。DX10.1介绍了如何对MRT的每个缓冲进行不同的混合操作。在之前的版本中，所有的缓冲都只能执行相同的混合操作（注意双颜色混合在MRT中没法使用）。


